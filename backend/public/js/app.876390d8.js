(function(e){function t(t){for(var r,a,i=t[0],u=t[1],c=t[2],l=0,p=[];l<i.length;l++)a=i[l],s[a]&&p.push(s[a][0]),s[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);f&&f(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==s[i]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},s={app:0},o=[];function i(e){return u.p+"js/"+({about:"about",page404:"page404",profile:"profile",signin:"signin",signup:"signup"}[e]||e)+"."+{about:"c185313a",page404:"f15d8306",profile:"39dffdd2",signin:"ea181302",signup:"1750e4a6"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={about:1,page404:1,profile:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({about:"about",page404:"page404",profile:"profile",signin:"signin",signup:"signup"}[e]||e)+"."+{about:"eba44928",page404:"7ea49109",profile:"713d09b6",signin:"31d6cfe0",signup:"31d6cfe0"}[e]+".css",a=u.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var i=s[o],c=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(c===r||c===a))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){i=l[o],c=i.getAttribute("data-href");if(c===r||c===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.request=r,n(s)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)}).then(function(){a[e]=0}));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise(function(t,n){r=s[e]=[t,n]});t.push(r[2]=o);var c,l=document.getElementsByTagName("head")[0],p=document.createElement("script");p.charset="utf-8",p.timeout=120,u.nc&&p.setAttribute("nonce",u.nc),p.src=i(e),c=function(t){p.onerror=p.onload=null,clearTimeout(f);var n=s[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");o.type=r,o.request=a,n[1](o)}s[e]=void 0}};var f=setTimeout(function(){c({type:"timeout",target:p})},12e4);p.onerror=p.onload=c,l.appendChild(p)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var f=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2583:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("96cf");var r=n("3040"),a=(n("cadf"),n("551c"),n("097d"),n("2b0e")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.loggedIn&&e.tokenExpired?n("div",{staticClass:"d-flex justify-content-center align-items-center h-100"},[n("h1",[e._v("Loading...")])]):n("router-view")],1)},o=[],i=n("c93e"),u=n("2f62"),c={data:function(){return{}},computed:Object(i["a"])({},Object(u["d"])("auth",["user"]),Object(u["c"])("auth",["loggedIn","tokenExpired"]))},l=c,p=(n("7faf"),n("2877")),f=Object(p["a"])(l,s,o,!1,null,null,null);f.options.__file="App.vue";var h=f.exports,m=n("8c4f"),d=n("31bd"),g=n("8afe"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-column",staticStyle:{height:"100%"}},[n("nav",{staticClass:"navbar navbar-expand-lg navbar-light",staticStyle:{"background-color":"#e3f2fd"}},[n("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e._v("\n      "+e._s(e.appName)+"\n    ")]),e._m(0),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarColor03"}},[n("ul",{staticClass:"navbar-nav mr-auto"},[n("li",{staticClass:"nav-item active"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[e._v("\n            Home\n          ")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/about"}},[e._v("\n            About\n          ")])],1)]),e.loggedIn?[e._v("\n        Hi, "),n("b",[e._v(e._s(e.user.name))]),e._v(".\n\n        "),n("button",{staticClass:"btn btn-primary btn-sm float-right ml-2",on:{click:function(t){e.$router.push("/profile")}}},[e._v("\n          Profile\n        ")]),n("button",{staticClass:"btn btn-secondary btn-sm float-right ml-2",on:{click:function(t){e.$actionWithLoading(e.logout,"loadingLogout")}}},[e.loadingLogout?n("span",[e._v("\n            Loading...\n          ")]):n("span",[e._v("\n            Logout\n          ")])])]:n("form",{staticClass:"form-inline"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"inputEmail"}},[e._v("\n            Email:\n          ")]),n("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|"+e.$formValidator.rules.email,expression:"'required|' + $formValidator.rules.email"},{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control mx-2",class:{"form-control":!0,"is-invalid":e.errors.has("email")},attrs:{id:"inputEmail","error-messages":e.errors.collect("email"),"data-vv-name":"email",type:"email",placeholder:"Enter email"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"inputPassword"}},[e._v("\n            Password:\n          ")]),n("input",{directives:[{name:"validate",rawName:"v-validate",value:e.$formValidator.rules.password,expression:"$formValidator.rules.password"},{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],staticClass:"form-control mx-2",class:{"form-control":!0,"is-invalid":e.errors.has("password")},attrs:{id:"inputPassword","data-vv-name":"password",type:"password",placeholder:"Password"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})]),n("button",{staticClass:"btn btn-primary float-right",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e.loading?n("span",[e._v("\n            Loading...\n          ")]):n("span",[e._v("\n            Sign in\n          ")])]),n("span",{staticClass:"ml-1"},[e._v("\n          or\n          "),n("router-link",{attrs:{to:"/signup"}},[e._v("Sign up")])],1)])],2)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.$auth.user&&!e.$auth.user.hasVerifiedEmail,expression:"$auth.user && !$auth.user.hasVerifiedEmail"}],staticClass:"alert alert-primary mx-auto mt-3",attrs:{role:"alert"}},[e._v("\n    Please, verify your email. We sent a message there.\n    "),n("button",{staticClass:"btn btn-primary btn-sm ml-2",on:{click:e.resendEmailVerification}},[e.resendLoading?n("span",[e._v("\n        Loading...\n      ")]):n("span",[e._v("\n        Resend\n      ")])])]),n("div",{staticClass:"container d-flex align-items-center justify-content-center",staticStyle:{height:"100%"}},[n("transition",{attrs:{name:"router",mode:"out-in"}},[n("router-view")],1)],1)])},b=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarColor03","aria-controls":"navbarColor03","aria-expanded":"false","aria-label":"Toggle navigation"}},[n("span",{staticClass:"navbar-toggler-icon"})])}],w={name:"MainLayout",data:function(){return{appName:"Auth(Vue + Laravel)",form:{email:"test@test.com",password:"password"},loading:!1,loadingLogout:!1,resendLoading:!1}},computed:Object(i["a"])({},Object(u["d"])("auth",["user"]),Object(u["c"])("auth",["token","loggedIn"])),methods:Object(i["a"])({submit:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$actionWithLoading(this.signin,"loading",this.form);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),resendEmailVerification:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$actionWithLoading(this.resend,"resendLoading");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},Object(u["b"])("auth",["signin","logout"]),Object(u["b"])("auth/emailVerification",["resend"]))},x=w,y=Object(p["a"])(x,v,b,!1,null,null,null);y.options.__file="Main.vue";var k=y.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-100 h-100"},[n("auth"),n("hr"),n("h2",{staticClass:"mb-4 mt-5 text-center"},[e._v("\n    Users\n  ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.user,expression:"!user"}],staticClass:"alert alert-primary mx-auto w-50",attrs:{role:"alert"}},[e._v("\n    You need to be authorized to view.\n  ")]),n("table",{directives:[{name:"show",rawName:"v-show",value:e.users&&e.loggedIn,expression:"users && loggedIn"}],staticClass:"table"},[e._m(0),n("tbody",e._l(e.users,function(t){return n("tr",{key:t.id},[n("th",{attrs:{scope:"row"}},[e._v(e._s(t.id))]),n("td",[e._v(e._s(t.name))]),n("td",[e._v(e._s(t.email))]),n("td",[e._v(e._s(t.created_at))])])}))]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"text-muted text-center"},[e._v("\n    Loading...\n  ")])],1)},E=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"thead-light"},[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("id")]),n("th",{attrs:{scope:"col"}},[e._v("Name")]),n("th",{attrs:{scope:"col"}},[e._v("Email")]),n("th",{attrs:{scope:"col"}},[e._v("Created at")])])])}],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-50 mx-auto clearfix px-5 mt-5 mb-4"},[n("div",{staticClass:"d-flex justify-content-center mb-3"},[n("router-link",{staticClass:"btn btn-secondary",attrs:{to:"/profile"}},[e._v("\n      Profile(protected route)\n    ")]),n("router-link",{staticClass:"btn btn-secondary ml-2",attrs:{to:"/signup"}},[e._v("\n      Sign up(only guests route)\n    ")]),n("router-link",{staticClass:"btn btn-secondary ml-2",attrs:{to:"/signin"}},[e._v("\n      Sign in(only guests route)\n    ")])],1),n("b",[e._v("Logged in:")]),e._v(" "+e._s(e.loggedIn)+"\n\n  "),n("br"),n("b",[e._v("User: ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.user,expression:"!user"}]},[e._v("–")]),e.user?n("pre",{staticClass:"pl-4"},[e._v(e._s(e.user))]):n("br"),n("b",{staticClass:"mb-2"},[e._v("Token: ")]),e.token?n("span",{attrs:{title:e.token}},[e._v("\n    "+e._s(e.token.slice(0,40)+"...")+"\n  ")]):n("span",[e._v("–")]),n("br"),n("b",[e._v("Token expiration:")]),n("span",{domProps:{innerHTML:e._s(e.tokenExpiresInFormated||"–")}}),n("br"),n("b",[e._v("Refresh token expiration:")]),n("span",{domProps:{innerHTML:e._s(e.refreshTokenExpiresInFormated||"–")}})])},R=[],j={data:function(){return{form:{email:"test@test.com",password:"password"},loading:!1,tokenExpiresInFormated:null,refreshTokenExpiresInFormated:null}},computed:Object(i["a"])({},Object(u["d"])("auth",["token","refreshToken","tokenExpiresIn","refreshTokenExpiresIn","user"]),Object(u["c"])("auth",["loggedIn"])),mounted:function(){Math.floor(Date.now()/1e3),this.setExpiresTime(),setInterval(this.setExpiresTime,1e3)},methods:Object(i["a"])({submit:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.signin(this.form);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:this.loading=!1;case 9:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}(),setExpiresTimeByToken:function(e){if(this.loggedIn){var t=this[e+"ExpiresIn"]-Math.floor(Date.now()/1e3),n=Math.abs(t),r="0".concat(Math.floor(n/3600),"h").slice(-3),a="0".concat(Math.floor(n%3600/60),"m").slice(-3),s="0".concat(Math.floor(n%60),"s").slice(-3),o=[r,a,s].join(":");this[e+"ExpiresInFormated"]=t<=0?'<span style="color: red"> token expired '.concat(o.slice(1)," ago.</span>"):o}else this[e+"ExpiresInFormated"]=null},setExpiresTime:function(){this.setExpiresTimeByToken("token"),this.setExpiresTimeByToken("refreshToken")}},Object(u["b"])("auth",["signin"]))},I=j,T=Object(p["a"])(I,O,R,!1,null,null,null);T.options.__file="Auth.vue";var $=T.exports,C={name:"Home",components:{Auth:$},data:function(){return{users:[],loading:!1}},computed:Object(i["a"])({},Object(u["d"])("auth",["user"]),Object(u["c"])("auth",["loggedIn"])),watch:{loggedIn:function(e){e&&this.fetchUsers()}},mounted:function(){this.loggedIn&&this.fetchUsers()},methods:{fetchUsers:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$get("users");case 3:this.users=e.sent,this.loading=!1;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},S=C,L=Object(p["a"])(S,_,E,!1,null,null,null);L.options.__file="Home.vue";var N,P=L.exports,U=[{name:"signup",path:"/signup",component:function(){return n.e("signup").then(n.bind(null,"5794"))},meta:{guest:!0}},{name:"signin",path:"/signin",component:function(){return n.e("signin").then(n.bind(null,"a50e"))},meta:{guest:!0}},{name:"forgot-password",path:"/forgot-password",component:function(){return n.e("signin").then(n.bind(null,"66e9"))},meta:{guest:!0}},{name:"reset-password",path:"/reset-password/:token/:email",component:function(){return n.e("signin").then(n.bind(null,"6127"))},meta:{guest:!0}},{name:"verify-email",path:"/verify-email",component:function(){return n.e("signin").then(n.bind(null,"9b60"))}}],A=[{name:"profile",path:"/profile",component:function(){return n.e("profile").then(n.bind(null,"2ff9"))},meta:{auth:!0}}],M=[{name:"about",path:"/about",component:function(){return n.e("about").then(n.bind(null,"a1d1"))}}],q=[{path:"/",component:k,children:[{name:"home",path:"/",component:P}].concat(Object(g["a"])(U),Object(g["a"])(A),Object(g["a"])(M),[{path:"*",component:function(){return n.e("page404").then(n.bind(null,"ee5d"))}}])}],V=n("0759"),H=n.n(V),D=n("a322"),B=a["a"].prototype,F="USER",G="USER_LOGGED_IN",W="USER_LOGGED_OUT",z="TOKEN",J="REFRESH_TOKEN_EXPIRED",K={namespaced:!0,state:{},mutations:{},actions:{sendEmail:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,o,i,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.dispatch,t.commit,r=fe.resolve({name:"reset-password",params:{token:"<token>",email:"<email>"}}),a=r.href,s=location.port?":"+location.port:"",o=location.protocol+"//"+location.hostname+s+a,e.next=6,B.$post("auth/forgot-password-email",{email:n,resetUrl:o});case 6:i=e.sent,u=i.message,B.$notify.success(u);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),resetPassword:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.next=3,B.$post("auth/forgot-password-reset",n);case 3:return a=e.sent,a.showMsg=!1,e.next=7,r("auth/loggedIn",a,{root:!0});case 7:B.$notify.success("Password has been reset successfully!");case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}},X={namespaced:!0,state:{},mutations:{},actions:{resend:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.dispatch,t.commit,e.next=3,B.$post("auth/email/resend");case 3:n=e.sent,B.$notify.success(n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),verify:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,o,i,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.prev=1,e.next=4,B.$post(n);case 4:a=e.sent,s=a.message,o=a.user,r("auth/setUser",o,{root:!0}),B.$notify.success(s),fe.push({name:"profile"}),e.next=18;break;case 12:e.prev=12,e.t0=e["catch"](1),i=e.t0.response,u=i.status,i.message,401===u?fe.push({name:"signin"}):429===u&&fe.push({name:"profile"});case 18:case"end":return e.stop()}},e,this,[[1,12]])}));return function(t,n){return e.apply(this,arguments)}}()}},Y={user:"auth__user",token:"auth__token",tokenExpiresIn:"auth__tokenExpiresIn",refreshTokenExpiresIn:"auth__refreshTokenExpiresIn"},Q=50,Z="auth/",ee=null,te={namespaced:!0,modules:{forgotPassword:K,emailVerification:X},state:{user:JSON.parse(localStorage.getItem(Y.user)),token:localStorage.getItem(Y.token),tokenExpiresIn:+localStorage.getItem(Y.tokenExpiresIn),refreshTokenExpiresIn:+localStorage.getItem(Y.refreshTokenExpiresIn),refreshTokenAlreadyExpired:!1},mutations:(N={},Object(D["a"])(N,F,function(e,t){return e.user=t,localStorage.setItem(Y.user,JSON.stringify(t)),t}),Object(D["a"])(N,z,function(e,t){console.log("token_global",t),e.token=t&&t.accessToken||"",e.tokenExpiresIn=+(t&&t.expiresIn)||"",e.refreshTokenExpiresIn=+(t&&t.refreshTokenExpiresIn)||"",localStorage.setItem(Y.token,e.token),localStorage.setItem(Y.tokenExpiresIn,e.tokenExpiresIn),localStorage.setItem(Y.refreshTokenExpiresIn,e.refreshTokenExpiresIn)}),Object(D["a"])(N,J,function(e){e.refreshTokenAlreadyExpired||(e.refreshTokenAlreadyExpired=!0,ae(),se())}),Object(D["a"])(N,G,function(e){e.refreshTokenAlreadyExpired=!1,oe.state.route.meta.guest&&fe.push({name:"profile"}),re(e)}),Object(D["a"])(N,W,function(e,t){ae(),oe.state.route.meta.auth&&fe.push({name:"signin"}),oe.state.route.meta.guest&&fe.push("/")}),N),actions:{signin:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.next=3,B.$post("auth/signin",n);case 3:return a=e.sent,e.next=6,r("loggedIn",a);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),signup:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.next=3,B.$post("auth/signup",n);case 3:return a=e.sent,a.showMsg=!1,e.next=7,r("loggedIn",a);case 7:B.$notify.success("Registered successfully!");case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),loggedIn:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.dispatch,r=t.commit,a=n.user,s=n.tokenInfo,o=n.showMsg,i=void 0===o||o,r(z,s),r(F,a),r(G),i&&B.$notify.success("logged in successfully!");case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getUser:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,B.$get("auth/user");case 3:return r=e.sent,a=r.user,e.abrupt("return",n(F,a));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),logout:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,e.next=3,B.$post("auth/logout");case 3:return e.next=5,n("setNullTokenAndUser");case 5:r(W,!0),B.$notify.success("Logged out successfully.");case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),refresh:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,a=t.state,e.next=3,B.$post("auth/refresh");case 3:if(s=e.sent,"tokenAlreadyRefreshed"!==s.status){e.next=6;break}return e.abrupt("return");case 6:if("refreshTokenExpired"!==s.status){e.next=10;break}return e.next=9,n("refreshTokenExpired");case 9:return e.abrupt("return");case 10:r(z,s),re(a);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),refreshTokenExpired:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,e.next=3,n("setNullTokenAndUser");case 3:r(J),r(W,!1);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setNullUser:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n(F,null);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setNullTokenAndUser:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n(z,null),n(F,null);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setUser:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,r(F,n);case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),init:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.state,re(n);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},getters:{loggedIn:function(e){return!!e.user},tokenNeedToRefresh:function(e){var t=e.tokenExpiresIn-Q,n=Math.floor(Date.now()/1e3);return e.token&&t<n},tokenExpired:function(e){return e.tokenExpiresIn<Math.floor(Date.now()/1e3)}}},ne=te;function re(e){var t=e.token,n=e.tokenExpiresIn;if(t){var a=Date.now()/1e3,s=n-a-Q,o=s>0?1e3*s:0;clearTimeout(ee),ee=setTimeout(Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oe.dispatch(Z+"refresh");case 2:case"end":return e.stop()}},e,this)})),o)}}function ae(){clearTimeout(ee)}function se(){B.$notify.info("Please, log in again")}a["a"].use(u["a"]);var oe=new u["a"].Store({plugins:[H()({predicate:["auth/USER","auth/TOKEN","auth/REFRESH_TOKEN_EXPIRED","auth/USER_LOGGED_IN","auth/USER_LOGGED_OUT"]})],modules:{auth:ne},state:{},mutations:{},actions:{}});function ie(e){e.beforeEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=oe.state.auth.token,s=oe.state.auth.user,o=oe.getters["auth/tokenNeedToRefresh"],e.prev=3,e.t0=!s&&a&&!o,!e.t0){e.next=8;break}return e.next=8,oe.dispatch("auth/getUser");case 8:e.next=13;break;case 10:e.prev=10,e.t1=e["catch"](3),console.error(e.t1);case 13:!a&&s&&oe.dispatch("auth/setNullUser"),r();case 15:case"end":return e.stop()}},e,this,[[3,10]])}));return function(t,n,r){return e.apply(this,arguments)}}())}function ue(e){e.beforeEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.matched.some(function(e){return e.meta.auth}),s=oe.state.auth.user,!a||s){e.next=6;break}return r({name:"signin"}),B.$notify.error("This page requires authentication!"),e.abrupt("return");case 6:r();case 7:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}())}function ce(e){e.beforeEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.matched.some(function(e){return e.meta.guest}),s=oe.state.auth.user,!a||!s){e.next=6;break}return n.fullPath?r(!1):r({name:"home"}),B.$notify.error("This page is for guests only!"),e.abrupt("return");case 6:r();case 7:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}())}var le=function(e){ie(e),ue(e),ce(e)};a["a"].use(m["a"]);var pe=new m["a"]({mode:"history",base:"/",routes:q});Object(d["sync"])(oe,pe),le(pe);var fe=pe,he=(n("2583"),n("bc3a")),me=n.n(he),de=n("6424"),ge=(n("ac4d"),n("8a81"),n("ac6a"),n("7bb1")),ve={name:"required|alpha_spaces|max:30",email:"email",password:"required|min:5"},be=new ge["a"](ve),we=function(e){var t=e.data,n=t.errors,r="";if(n){for(var a in n)if(n.hasOwnProperty(a)){var s=!0,o=!1,i=void 0;try{for(var u,c=n[a][Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var l=u.value;r+="".concat(l,"<br>")}}catch(e){o=!0,i=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw i}}}}else r=t.message;B.$notify.error(r)},xe="http://localhost:8000/api/";a["a"].use(de["a"],{axios:me.a,config:{baseURL:xe,headers:{"X-Requested-With":"XMLHttpRequest"}},interceptors:{beforeRequest:function(e,t){if(e.baseURL===xe){var n=oe.state.auth.token;n&&(e.headers.Authorization="Bearer ".concat(n))}return e},beforeResponseError:function(e){var t=e.response,n=e.message;t?we(t):n&&B.$notify.error(n)}}});n("ab8b");var ye=n("e440"),ke=n.n(ye),_e=n("2685"),Ee=n.n(_e);n("6705");function Oe(e){var t=e.title,n=e.message,r=e.type,a=e.timeout;e.cb;return r===ke.a.types.warn&&(r="warning"),Ee.a[r]({title:t,message:n,timeout:a})}var Re={success:Oe,error:Oe,info:Oe,warn:Oe},je={},Ie=function(e){je[e]=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.timeout,s=void 0===a?3e3:a;Oe({type:e,title:t,message:n,timeout:s})}};for(var Te in Re)Ie(Te);a["a"].use(ke.a,Re),a["a"].prototype.$notify=je,a["a"].use(ge["b"]),a["a"].prototype.$formValidator={rules:ve,validate:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.validator.validateAll(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),validator:be},a["a"].config.productionTip=!1,a["a"].prototype.$auth={get user(){return oe.state.auth.user},get loggedIn(){return oe.getters["auth/loggedIn"]}},a["a"].prototype.$actionWithLoading=function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,o,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(this[n]=!0,e.prev=1,a=i.length,s=new Array(a>2?a-2:0),o=2;o<a;o++)s[o-2]=i[o];return(r=console).log.apply(r,s),e.next=6,t.apply(void 0,s);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](1),e.t0;case 11:return e.prev=11,this[n]=!1,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[1,8,11,14]])}));return function(t,n){return e.apply(this,arguments)}}(),new a["a"]({router:fe,store:oe,render:function(e){return e(h)}}).$mount("#app"),oe.dispatch("auth/init")},5917:function(e,t,n){},6424:function(e,t,n){"use strict";(function(e){n("2586"),n("050c"),n("aa77");var r=n("6bde"),a=n("c93e"),s=(n("6f35"),n("67d7")),o={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.axios,r=t.config,a=void 0===r?{}:r,s=t.interceptors,o=void 0===s?{}:s;if(!n)throw new Error("Vue-axios-wrapper: please, specify in the settings your axios package.");var u=new i(n,a,{interceptors:o});Object.assign(e.prototype,u)}};function i(e,t,n){var r=this;r.axiosInstance=e.create(t),u(r),c(r,n.interceptors);var o=["post","get","put","patch","delete","head","options"],i={};o.forEach(function(e){Object.defineProperty(i,"$"+e,{enumerable:!0,get:function(){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return s["a"].apply(r.axiosInstance,[e,n])}}})});var l=Object(a["a"])({},i,{get $axios(){return r.axiosInstance},get $http(){return r.axiosInstance}});return l}function u(e){var t=e.axiosInstance;t.setHeader||(t.setHeader=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("object"===Object(r["a"])(e))for(var a in e)s(a,e[a]);else"string"===typeof e&&s(e,n);function s(e,n){"auth"===e?t.setToken(n):t.defaults.headers[e]=n}return t.defaults},t.setToken||(t.setToken=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Bearer",r=e?(n?n+" ":"")+e:null;return t.setHeader("Authorization",r)})),t.deleteHeader||(t.deleteHeader=function(e){if("object"===Object(r["a"])(e)){var n=!0,a=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var u=o.value;c(u)}}catch(e){a=!0,s=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw s}}}else"string"===typeof e&&c(e);function c(e){"auth"===e?delete t.defaults.headers["Authorization"]:delete t.defaults.headers[e]}return t.defaults})}function c(e,t){e.axiosInstance.interceptors.request.use(function(n){return t.beforeRequest&&t.beforeRequest(n,e.axiosInstance)||n},function(n){return t.beforeRequestError&&t.beforeRequestError(n,e.axiosInstance),Promise.reject(n)}),e.axiosInstance.interceptors.response.use(function(n){return t.beforeResponse&&t.beforeResponse(n,e.axiosInstance),n},function(n){return t.beforeResponseError&&t.beforeResponseError(n,e.axiosInstance),Promise.reject(n)})}t["a"]=o;var l=null;"undefined"!==typeof window?l=window.Vue:"undefined"!==typeof e&&(l=e.Vue),l&&l.use(o)}).call(this,n("c8ba"))},"67d7":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("8afe");function a(e,t){return this[e].apply(this,Object(r["a"])(t)).then(function(e){var t=e.data;return t}).catch(function(e){throw e})}},"7faf":function(e,t,n){"use strict";var r=n("5917"),a=n.n(r);a.a}});
//# sourceMappingURL=app.876390d8.js.map